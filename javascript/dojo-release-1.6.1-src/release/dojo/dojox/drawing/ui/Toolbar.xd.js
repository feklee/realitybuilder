/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


realitybuilderDojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.drawing.ui.Toolbar"],["require","dojox.drawing.library.icons"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.drawing.ui.Toolbar"]){_4._hasResource["dojox.drawing.ui.Toolbar"]=true;_4.provide("dojox.drawing.ui.Toolbar");_4.require("dojox.drawing.library.icons");_4.declare("dojox.drawing.ui.Toolbar",[],{constructor:function(_7,_8){this.util=_6.drawing.util.common;if(_7.drawing){this.toolDrawing=_7.drawing;this.drawing=this.toolDrawing;this.width=this.toolDrawing.width;this.height=this.toolDrawing.height;this.strSelected=_7.selected;this.strTools=_7.tools;this.strPlugs=_7.plugs;this._mixprops(["padding","margin","size","radius"],_7);this.addBack();this.orient=_7.orient?_7.orient:false;}else{var _9=_4.marginBox(_8);this.width=_9.w;this.height=_9.h;this.strSelected=_4.attr(_8,"selected");this.strTools=_4.attr(_8,"tools");this.strPlugs=_4.attr(_8,"plugs");this._mixprops(["padding","margin","size","radius"],_8);this.toolDrawing=new _6.drawing.Drawing({mode:"ui"},_8);this.orient=_4.attr(_8,"orient");}this.horizontal=this.orient?this.orient=="H":this.width>this.height;console.log("this.hor: ",this.horizontal," orient: ",this.orient);if(this.toolDrawing.ready){this.makeButtons();if(!this.strSelected&&this.drawing.defaults.clickMode){this.drawing.mouse.setCursor("default");}}else{var c=_4.connect(this.toolDrawing,"onSurfaceReady",this,function(){_4.disconnect(c);this.drawing=_6.drawing.getRegistered("drawing",_4.attr(_8,"drawingId"));this.makeButtons();if(!this.strSelected&&this.drawing.defaults.clickMode){var c=_4.connect(this.drawing,"onSurfaceReady",this,function(){_4.disconnect(c);this.drawing.mouse.setCursor("default");});}});}},padding:10,margin:5,size:30,radius:3,toolPlugGap:20,strSelected:"",strTools:"",strPlugs:"",makeButtons:function(){this.buttons=[];this.plugins=[];var x=this.padding,y=this.padding,w=this.size,h=this.size,r=this.radius,g=this.margin,_a=_6.drawing.library.icons,s={place:"BR",size:2,mult:4};if(this.strTools){var _b=[];var _c=_6.drawing.getRegistered("tool");var _d={};for(var nm in _c){var _e=this.util.abbr(nm);_d[_e]=_c[nm];if(this.strTools=="all"){_b.push(_e);var _f=_6.drawing.getRegistered("tool",nm);if(_f.secondary){_b.push(_f.secondary.name);}}}if(this.strTools!="all"){var _10=this.strTools.split(",");_4.forEach(_10,function(_11){_11=_4.trim(_11);_b.push(_11);var _12=_6.drawing.getRegistered("tool",_d[_11].name);if(_12.secondary){_b.push(_12.secondary.name);}},this);}_4.forEach(_b,function(t){t=_4.trim(t);var _13=false;if(t.indexOf("Secondary")>-1){var _14=t.substring(0,t.indexOf("Secondary"));var sec=_6.drawing.getRegistered("tool",_d[_14].name).secondary;var _15=sec.label;this[t]=sec.funct;if(sec.setup){_4.hitch(this,sec.setup)();}var btn=this.toolDrawing.addUI("button",{data:{x:x,y:y,width:w,height:h/2,r:r},toolType:t,secondary:true,text:_15,shadow:s,scope:this,callback:this[t]});if(sec.postSetup){_4.hitch(this,sec.postSetup,btn)();}_13=true;}else{var btn=this.toolDrawing.addUI("button",{data:{x:x,y:y,width:w,height:h,r:r},toolType:t,icon:_a[t],shadow:s,scope:this,callback:"onToolClick"});}_6.drawing.register(btn,"button");this.buttons.push(btn);if(this.strSelected==t){btn.select();this.selected=btn;this.drawing.setTool(btn.toolType);}if(this.horizontal){x+=h+g;}else{var _16=_13?h/2+g:h+g;y+=_16;}},this);}if(this.horizontal){x+=this.toolPlugGap;}else{y+=this.toolPlugGap;}if(this.strPlugs){var _17=[];var _18=_6.drawing.getRegistered("plugin");var _19={};for(var nm in _18){var _1a=this.util.abbr(nm);_19[_1a]=_18[nm];if(this.strPlugs=="all"){_17.push(_1a);}}if(this.strPlugs!="all"){_17=this.strPlugs.split(",");_4.map(_17,function(p){return _4.trim(p);});}_4.forEach(_17,function(p){var t=_4.trim(p);if(_19[p].button!=false){var btn=this.toolDrawing.addUI("button",{data:{x:x,y:y,width:w,height:h,r:r},toolType:t,icon:_a[t],shadow:s,scope:this,callback:"onPlugClick"});_6.drawing.register(btn,"button");this.plugins.push(btn);if(this.horizontal){x+=h+g;}else{y+=h+g;}}var _1b={};_19[p].button==false?_1b={name:this.drawing.stencilTypeMap[p]}:_1b={name:this.drawing.stencilTypeMap[p],options:{button:btn}};this.drawing.addPlugin(_1b);},this);}_4.connect(this.drawing,"onRenderStencil",this,"onRenderStencil");},onRenderStencil:function(_1c){if(this.drawing.defaults.clickMode){this.drawing.mouse.setCursor("default");this.selected&&this.selected.deselect();this.selected=null;}},addTool:function(){},addPlugin:function(){},addBack:function(){this.toolDrawing.addUI("rect",{data:{x:0,y:0,width:this.width,height:this.size+(this.padding*2),fill:"#ffffff",borderWidth:0}});},onToolClick:function(_1d){if(this.drawing.defaults.clickMode){this.drawing.mouse.setCursor("crosshair");}_4.forEach(this.buttons,function(b){if(b.id==_1d.id){b.select();this.selected=b;this.drawing.setTool(_1d.toolType);}else{if(!b.secondary){b.deselect();}}},this);},onPlugClick:function(_1e){},_mixprops:function(_1f,_20){_4.forEach(_1f,function(p){this[p]=_20.tagName?_4.attr(_20,p)===null?this[p]:_4.attr(_20,p):_20[p]===undefined?this[p]:_20[p];},this);}});}}};});