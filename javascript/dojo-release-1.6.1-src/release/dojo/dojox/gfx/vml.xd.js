/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


realitybuilderDojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.gfx.vml"],["require","dojox.gfx._base"],["require","dojox.gfx.shape"],["require","dojox.gfx.path"],["require","dojox.gfx.arc"],["require","dojox.gfx.gradient"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.gfx.vml"]){_4._hasResource["dojox.gfx.vml"]=true;_4.provide("dojox.gfx.vml");_4.require("dojox.gfx._base");_4.require("dojox.gfx.shape");_4.require("dojox.gfx.path");_4.require("dojox.gfx.arc");_4.require("dojox.gfx.gradient");(function(){var d=_4,g=_6.gfx,m=g.matrix,gs=g.shape,_7=g.vml;_7.xmlns="urn:schemas-microsoft-com:vml";_7.text_alignment={start:"left",middle:"center",end:"right"};_7._parseFloat=function(_8){return _8.match(/^\d+f$/i)?parseInt(_8)/65536:parseFloat(_8);};_7._bool={"t":1,"true":1};d.declare("dojox.gfx.vml.Shape",gs.Shape,{setFill:function(_9){if(!_9){this.fillStyle=null;this.rawNode.filled="f";return this;}var i,f,fo,a,s;if(typeof _9=="object"&&"type" in _9){switch(_9.type){case "linear":var _a=this._getRealMatrix(),_b=this.getBoundingBox(),_c=this._getRealBBox?this._getRealBBox():this.getTransformedBoundingBox();s=[];if(this.fillStyle!==_9){this.fillStyle=g.makeParameters(g.defaultLinearGradient,_9);}f=g.gradient.project(_a,this.fillStyle,{x:_b.x,y:_b.y},{x:_b.x+_b.width,y:_b.y+_b.height},_c[0],_c[2]);a=f.colors;if(a[0].offset.toFixed(5)!="0.00000"){s.push("0 "+g.normalizeColor(a[0].color).toHex());}for(i=0;i<a.length;++i){s.push(a[i].offset.toFixed(5)+" "+g.normalizeColor(a[i].color).toHex());}i=a.length-1;if(a[i].offset.toFixed(5)!="1.00000"){s.push("1 "+g.normalizeColor(a[i].color).toHex());}fo=this.rawNode.fill;fo.colors.value=s.join(";");fo.method="sigma";fo.type="gradient";fo.angle=(270-m._radToDeg(f.angle))%360;fo.on=true;break;case "radial":f=g.makeParameters(g.defaultRadialGradient,_9);this.fillStyle=f;var l=parseFloat(this.rawNode.style.left),t=parseFloat(this.rawNode.style.top),w=parseFloat(this.rawNode.style.width),h=parseFloat(this.rawNode.style.height),c=isNaN(w)?1:2*f.r/w;a=[];if(f.colors[0].offset>0){a.push({offset:1,color:g.normalizeColor(f.colors[0].color)});}d.forEach(f.colors,function(v,i){a.push({offset:1-v.offset*c,color:g.normalizeColor(v.color)});});i=a.length-1;while(i>=0&&a[i].offset<0){--i;}if(i<a.length-1){var q=a[i],p=a[i+1];p.color=d.blendColors(q.color,p.color,q.offset/(q.offset-p.offset));p.offset=0;while(a.length-i>2){a.pop();}}i=a.length-1,s=[];if(a[i].offset>0){s.push("0 "+a[i].color.toHex());}for(;i>=0;--i){s.push(a[i].offset.toFixed(5)+" "+a[i].color.toHex());}fo=this.rawNode.fill;fo.colors.value=s.join(";");fo.method="sigma";fo.type="gradientradial";if(isNaN(w)||isNaN(h)||isNaN(l)||isNaN(t)){fo.focusposition="0.5 0.5";}else{fo.focusposition=((f.cx-l)/w).toFixed(5)+" "+((f.cy-t)/h).toFixed(5);}fo.focussize="0 0";fo.on=true;break;case "pattern":f=g.makeParameters(g.defaultPattern,_9);this.fillStyle=f;fo=this.rawNode.fill;fo.type="tile";fo.src=f.src;if(f.width&&f.height){fo.size.x=g.px2pt(f.width);fo.size.y=g.px2pt(f.height);}fo.alignShape="f";fo.position.x=0;fo.position.y=0;fo.origin.x=f.width?f.x/f.width:0;fo.origin.y=f.height?f.y/f.height:0;fo.on=true;break;}this.rawNode.fill.opacity=1;return this;}this.fillStyle=g.normalizeColor(_9);fo=this.rawNode.fill;if(!fo){fo=this.rawNode.ownerDocument.createElement("v:fill");}fo.method="any";fo.type="solid";fo.opacity=this.fillStyle.a;var _d=this.rawNode.filters["DXImageTransform.Microsoft.Alpha"];if(_d){_d.opacity=Math.round(this.fillStyle.a*100);}this.rawNode.fillcolor=this.fillStyle.toHex();this.rawNode.filled=true;return this;},setStroke:function(_e){if(!_e){this.strokeStyle=null;this.rawNode.stroked="f";return this;}if(typeof _e=="string"||d.isArray(_e)||_e instanceof d.Color){_e={color:_e};}var s=this.strokeStyle=g.makeParameters(g.defaultStroke,_e);s.color=g.normalizeColor(s.color);var rn=this.rawNode;rn.stroked=true;rn.strokecolor=s.color.toCss();rn.strokeweight=s.width+"px";if(rn.stroke){rn.stroke.opacity=s.color.a;rn.stroke.endcap=this._translate(this._capMap,s.cap);if(typeof s.join=="number"){rn.stroke.joinstyle="miter";rn.stroke.miterlimit=s.join;}else{rn.stroke.joinstyle=s.join;}rn.stroke.dashstyle=s.style=="none"?"Solid":s.style;}return this;},_capMap:{butt:"flat"},_capMapReversed:{flat:"butt"},_translate:function(_f,_10){return (_10 in _f)?_f[_10]:_10;},_applyTransform:function(){var _11=this._getRealMatrix();if(_11){var _12=this.rawNode.skew;if(typeof _12=="undefined"){for(var i=0;i<this.rawNode.childNodes.length;++i){if(this.rawNode.childNodes[i].tagName=="skew"){_12=this.rawNode.childNodes[i];break;}}}if(_12){_12.on="f";var mt=_11.xx.toFixed(8)+" "+_11.xy.toFixed(8)+" "+_11.yx.toFixed(8)+" "+_11.yy.toFixed(8)+" 0 0",_13=Math.floor(_11.dx).toFixed()+"px "+Math.floor(_11.dy).toFixed()+"px",s=this.rawNode.style,l=parseFloat(s.left),t=parseFloat(s.top),w=parseFloat(s.width),h=parseFloat(s.height);if(isNaN(l)){l=0;}if(isNaN(t)){t=0;}if(isNaN(w)||!w){w=1;}if(isNaN(h)||!h){h=1;}var _14=(-l/w-0.5).toFixed(8)+" "+(-t/h-0.5).toFixed(8);_12.matrix=mt;_12.origin=_14;_12.offset=_13;_12.on=true;}}if(this.fillStyle&&this.fillStyle.type=="linear"){this.setFill(this.fillStyle);}return this;},_setDimensions:function(_15,_16){return this;},setRawNode:function(_17){_17.stroked="f";_17.filled="f";this.rawNode=_17;},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this;},_moveToBack:function(){var r=this.rawNode,p=r.parentNode,n=p.firstChild;p.insertBefore(r,n);if(n.tagName=="rect"){n.swapNode(r);}return this;},_getRealMatrix:function(){return this.parentMatrix?new g.Matrix2D([this.parentMatrix,this.matrix]):this.matrix;}});_4.declare("dojox.gfx.vml.Group",_7.Shape,{constructor:function(){gs.Container._init.call(this);},_applyTransform:function(){var _18=this._getRealMatrix();for(var i=0;i<this.children.length;++i){this.children[i]._updateParentMatrix(_18);}return this;},_setDimensions:function(_19,_1a){var r=this.rawNode,rs=r.style,bs=this.bgNode.style;rs.width=_19;rs.height=_1a;r.coordsize=_19+" "+_1a;bs.width=_19;bs.height=_1a;for(var i=0;i<this.children.length;++i){this.children[i]._setDimensions(_19,_1a);}return this;}});_7.Group.nodeType="group";_4.declare("dojox.gfx.vml.Rect",[_7.Shape,gs.Rect],{setShape:function(_1b){var _1c=this.shape=g.makeParameters(this.shape,_1b);this.bbox=null;var r=Math.min(1,(_1c.r/Math.min(parseFloat(_1c.width),parseFloat(_1c.height)))).toFixed(8);var _1d=this.rawNode.parentNode,_1e=null;if(_1d){if(_1d.lastChild!==this.rawNode){for(var i=0;i<_1d.childNodes.length;++i){if(_1d.childNodes[i]===this.rawNode){_1e=_1d.childNodes[i+1];break;}}}_1d.removeChild(this.rawNode);}if(d.isIE>7){var _1f=this.rawNode.ownerDocument.createElement("v:roundrect");_1f.arcsize=r;_1f.style.display="inline-block";this.rawNode=_1f;}else{this.rawNode.arcsize=r;}if(_1d){if(_1e){_1d.insertBefore(this.rawNode,_1e);}else{_1d.appendChild(this.rawNode);}}var _20=this.rawNode.style;_20.left=_1c.x.toFixed();_20.top=_1c.y.toFixed();_20.width=(typeof _1c.width=="string"&&_1c.width.indexOf("%")>=0)?_1c.width:_1c.width.toFixed();_20.height=(typeof _1c.width=="string"&&_1c.height.indexOf("%")>=0)?_1c.height:_1c.height.toFixed();return this.setTransform(this.matrix).setFill(this.fillStyle).setStroke(this.strokeStyle);}});_7.Rect.nodeType="roundrect";_4.declare("dojox.gfx.vml.Ellipse",[_7.Shape,gs.Ellipse],{setShape:function(_21){var _22=this.shape=g.makeParameters(this.shape,_21);this.bbox=null;var _23=this.rawNode.style;_23.left=(_22.cx-_22.rx).toFixed();_23.top=(_22.cy-_22.ry).toFixed();_23.width=(_22.rx*2).toFixed();_23.height=(_22.ry*2).toFixed();return this.setTransform(this.matrix);}});_7.Ellipse.nodeType="oval";_4.declare("dojox.gfx.vml.Circle",[_7.Shape,gs.Circle],{setShape:function(_24){var _25=this.shape=g.makeParameters(this.shape,_24);this.bbox=null;var _26=this.rawNode.style;_26.left=(_25.cx-_25.r).toFixed();_26.top=(_25.cy-_25.r).toFixed();_26.width=(_25.r*2).toFixed();_26.height=(_25.r*2).toFixed();return this;}});_7.Circle.nodeType="oval";_4.declare("dojox.gfx.vml.Line",[_7.Shape,gs.Line],{constructor:function(_27){if(_27){_27.setAttribute("dojoGfxType","line");}},setShape:function(_28){var _29=this.shape=g.makeParameters(this.shape,_28);this.bbox=null;this.rawNode.path.v="m"+_29.x1.toFixed()+" "+_29.y1.toFixed()+"l"+_29.x2.toFixed()+" "+_29.y2.toFixed()+"e";return this.setTransform(this.matrix);}});_7.Line.nodeType="shape";_4.declare("dojox.gfx.vml.Polyline",[_7.Shape,gs.Polyline],{constructor:function(_2a){if(_2a){_2a.setAttribute("dojoGfxType","polyline");}},setShape:function(_2b,_2c){if(_2b&&_2b instanceof Array){this.shape=g.makeParameters(this.shape,{points:_2b});if(_2c&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{this.shape=g.makeParameters(this.shape,_2b);}this.bbox=null;this._normalizePoints();var _2d=[],p=this.shape.points;if(p.length>0){_2d.push("m");_2d.push(p[0].x.toFixed(),p[0].y.toFixed());if(p.length>1){_2d.push("l");for(var i=1;i<p.length;++i){_2d.push(p[i].x.toFixed(),p[i].y.toFixed());}}}_2d.push("e");this.rawNode.path.v=_2d.join(" ");return this.setTransform(this.matrix);}});_7.Polyline.nodeType="shape";_4.declare("dojox.gfx.vml.Image",[_7.Shape,gs.Image],{setShape:function(_2e){var _2f=this.shape=g.makeParameters(this.shape,_2e);this.bbox=null;this.rawNode.firstChild.src=_2f.src;return this.setTransform(this.matrix);},_applyTransform:function(){var _30=this._getRealMatrix(),_31=this.rawNode,s=_31.style,_32=this.shape;if(_30){_30=m.multiply(_30,{dx:_32.x,dy:_32.y});}else{_30=m.normalize({dx:_32.x,dy:_32.y});}if(_30.xy==0&&_30.yx==0&&_30.xx>0&&_30.yy>0){s.filter="";s.width=Math.floor(_30.xx*_32.width);s.height=Math.floor(_30.yy*_32.height);s.left=Math.floor(_30.dx);s.top=Math.floor(_30.dy);}else{var ps=_31.parentNode.style;s.left="0px";s.top="0px";s.width=ps.width;s.height=ps.height;_30=m.multiply(_30,{xx:_32.width/parseInt(s.width),yy:_32.height/parseInt(s.height)});var f=_31.filters["DXImageTransform.Microsoft.Matrix"];if(f){f.M11=_30.xx;f.M12=_30.xy;f.M21=_30.yx;f.M22=_30.yy;f.Dx=_30.dx;f.Dy=_30.dy;}else{s.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+_30.xx+", M12="+_30.xy+", M21="+_30.yx+", M22="+_30.yy+", Dx="+_30.dx+", Dy="+_30.dy+")";}}return this;},_setDimensions:function(_33,_34){var r=this.rawNode,f=r.filters["DXImageTransform.Microsoft.Matrix"];if(f){var s=r.style;s.width=_33;s.height=_34;return this._applyTransform();}return this;}});_7.Image.nodeType="rect";_4.declare("dojox.gfx.vml.Text",[_7.Shape,gs.Text],{constructor:function(_35){if(_35){_35.setAttribute("dojoGfxType","text");}this.fontStyle=null;},_alignment:{start:"left",middle:"center",end:"right"},setShape:function(_36){this.shape=g.makeParameters(this.shape,_36);this.bbox=null;var r=this.rawNode,s=this.shape,x=s.x,y=s.y.toFixed(),_37;switch(s.align){case "middle":x-=5;break;case "end":x-=10;break;}_37="m"+x.toFixed()+","+y+"l"+(x+10).toFixed()+","+y+"e";var p=null,t=null,c=r.childNodes;for(var i=0;i<c.length;++i){var tag=c[i].tagName;if(tag=="path"){p=c[i];if(t){break;}}else{if(tag=="textpath"){t=c[i];if(p){break;}}}}if(!p){p=r.ownerDocument.createElement("v:path");r.appendChild(p);}if(!t){t=r.ownerDocument.createElement("v:textpath");r.appendChild(t);}p.v=_37;p.textPathOk=true;t.on=true;var a=_7.text_alignment[s.align];t.style["v-text-align"]=a?a:"left";t.style["text-decoration"]=s.decoration;t.style["v-rotate-letters"]=s.rotated;t.style["v-text-kern"]=s.kerning;t.string=s.text;return this.setTransform(this.matrix);},_setFont:function(){var f=this.fontStyle,c=this.rawNode.childNodes;for(var i=0;i<c.length;++i){if(c[i].tagName=="textpath"){c[i].style.font=g.makeFontString(f);break;}}this.setTransform(this.matrix);},_getRealMatrix:function(){var _38=this.inherited(arguments);if(_38){_38=m.multiply(_38,{dy:-g.normalizedLength(this.fontStyle?this.fontStyle.size:"10pt")*0.35});}return _38;},getTextWidth:function(){var _39=this.rawNode,_3a=_39.style.display;_39.style.display="inline";var _3b=g.pt2px(parseFloat(_39.currentStyle.width));_39.style.display=_3a;return _3b;}});_7.Text.nodeType="shape";_4.declare("dojox.gfx.vml.Path",[_7.Shape,g.path.Path],{constructor:function(_3c){if(_3c&&!_3c.getAttribute("dojoGfxType")){_3c.setAttribute("dojoGfxType","path");}this.vmlPath="";this.lastControl={};},_updateWithSegment:function(_3d){var _3e=d.clone(this.last);this.inherited(arguments);if(arguments.length>1){return;}var _3f=this[this.renderers[_3d.action]](_3d,_3e);if(typeof this.vmlPath=="string"){this.vmlPath+=_3f.join("");this.rawNode.path.v=this.vmlPath+" r0,0 e";}else{Array.prototype.push.apply(this.vmlPath,_3f);}},setShape:function(_40){this.vmlPath=[];this.lastControl.type="";this.inherited(arguments);this.vmlPath=this.vmlPath.join("");this.rawNode.path.v=this.vmlPath+" r0,0 e";return this;},_pathVmlToSvgMap:{m:"M",l:"L",t:"m",r:"l",c:"C",v:"c",qb:"Q",x:"z",e:""},renderers:{M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"},_addArgs:function(_41,_42,_43,_44){var n=_42 instanceof Array?_42:_42.args;for(var i=_43;i<_44;++i){_41.push(" ",n[i].toFixed());}},_adjustRelCrd:function(_45,_46,_47){var n=_46 instanceof Array?_46:_46.args,l=n.length,_48=new Array(l),i=0,x=_45.x,y=_45.y;if(typeof x!="number"){_48[0]=x=n[0];_48[1]=y=n[1];i=2;}if(typeof _47=="number"&&_47!=2){var j=_47;while(j<=l){for(;i<j;i+=2){_48[i]=x+n[i];_48[i+1]=y+n[i+1];}x=_48[j-2];y=_48[j-1];j+=_47;}}else{for(;i<l;i+=2){_48[i]=(x+=n[i]);_48[i+1]=(y+=n[i+1]);}}return _48;},_adjustRelPos:function(_49,_4a){var n=_4a instanceof Array?_4a:_4a.args,l=n.length,_4b=new Array(l);for(var i=0;i<l;++i){_4b[i]=(_49+=n[i]);}return _4b;},_moveToA:function(_4c){var p=[" m"],n=_4c instanceof Array?_4c:_4c.args,l=n.length;this._addArgs(p,n,0,2);if(l>2){p.push(" l");this._addArgs(p,n,2,l);}this.lastControl.type="";return p;},_moveToR:function(_4d,_4e){return this._moveToA(this._adjustRelCrd(_4e,_4d));},_lineToA:function(_4f){var p=[" l"],n=_4f instanceof Array?_4f:_4f.args;this._addArgs(p,n,0,n.length);this.lastControl.type="";return p;},_lineToR:function(_50,_51){return this._lineToA(this._adjustRelCrd(_51,_50));},_hLineToA:function(_52,_53){var p=[" l"],y=" "+_53.y.toFixed(),n=_52 instanceof Array?_52:_52.args,l=n.length;for(var i=0;i<l;++i){p.push(" ",n[i].toFixed(),y);}this.lastControl.type="";return p;},_hLineToR:function(_54,_55){return this._hLineToA(this._adjustRelPos(_55.x,_54),_55);},_vLineToA:function(_56,_57){var p=[" l"],x=" "+_57.x.toFixed(),n=_56 instanceof Array?_56:_56.args,l=n.length;for(var i=0;i<l;++i){p.push(x," ",n[i].toFixed());}this.lastControl.type="";return p;},_vLineToR:function(_58,_59){return this._vLineToA(this._adjustRelPos(_59.y,_58),_59);},_curveToA:function(_5a){var p=[],n=_5a instanceof Array?_5a:_5a.args,l=n.length,lc=this.lastControl;for(var i=0;i<l;i+=6){p.push(" c");this._addArgs(p,n,i,i+6);}lc.x=n[l-4];lc.y=n[l-3];lc.type="C";return p;},_curveToR:function(_5b,_5c){return this._curveToA(this._adjustRelCrd(_5c,_5b,6));},_smoothCurveToA:function(_5d,_5e){var p=[],n=_5d instanceof Array?_5d:_5d.args,l=n.length,lc=this.lastControl,i=0;if(lc.type!="C"){p.push(" c");this._addArgs(p,[_5e.x,_5e.y],0,2);this._addArgs(p,n,0,4);lc.x=n[0];lc.y=n[1];lc.type="C";i=4;}for(;i<l;i+=4){p.push(" c");this._addArgs(p,[2*_5e.x-lc.x,2*_5e.y-lc.y],0,2);this._addArgs(p,n,i,i+4);lc.x=n[i];lc.y=n[i+1];}return p;},_smoothCurveToR:function(_5f,_60){return this._smoothCurveToA(this._adjustRelCrd(_60,_5f,4),_60);},_qCurveToA:function(_61){var p=[],n=_61 instanceof Array?_61:_61.args,l=n.length,lc=this.lastControl;for(var i=0;i<l;i+=4){p.push(" qb");this._addArgs(p,n,i,i+4);}lc.x=n[l-4];lc.y=n[l-3];lc.type="Q";return p;},_qCurveToR:function(_62,_63){return this._qCurveToA(this._adjustRelCrd(_63,_62,4));},_qSmoothCurveToA:function(_64,_65){var p=[],n=_64 instanceof Array?_64:_64.args,l=n.length,lc=this.lastControl,i=0;if(lc.type!="Q"){p.push(" qb");this._addArgs(p,[lc.x=_65.x,lc.y=_65.y],0,2);lc.type="Q";this._addArgs(p,n,0,2);i=2;}for(;i<l;i+=2){p.push(" qb");this._addArgs(p,[lc.x=2*_65.x-lc.x,lc.y=2*_65.y-lc.y],0,2);this._addArgs(p,n,i,i+2);}return p;},_qSmoothCurveToR:function(_66,_67){return this._qSmoothCurveToA(this._adjustRelCrd(_67,_66,2),_67);},_arcTo:function(_68,_69){var p=[],n=_68.args,l=n.length,_6a=_68.action=="a";for(var i=0;i<l;i+=7){var x1=n[i+5],y1=n[i+6];if(_6a){x1+=_69.x;y1+=_69.y;}var _6b=g.arc.arcAsBezier(_69,n[i],n[i+1],n[i+2],n[i+3]?1:0,n[i+4]?1:0,x1,y1);for(var j=0;j<_6b.length;++j){p.push(" c");var t=_6b[j];this._addArgs(p,t,0,t.length);this._updateBBox(t[0],t[1]);this._updateBBox(t[2],t[3]);this._updateBBox(t[4],t[5]);}_69.x=x1;_69.y=y1;}this.lastControl.type="";return p;},_closePath:function(){this.lastControl.type="";return ["x"];}});_7.Path.nodeType="shape";_4.declare("dojox.gfx.vml.TextPath",[_7.Path,g.path.TextPath],{constructor:function(_6c){if(_6c){_6c.setAttribute("dojoGfxType","textpath");}this.fontStyle=null;if(!("text" in this)){this.text=d.clone(g.defaultTextPath);}if(!("fontStyle" in this)){this.fontStyle=d.clone(g.defaultFont);}},setText:function(_6d){this.text=g.makeParameters(this.text,typeof _6d=="string"?{text:_6d}:_6d);this._setText();return this;},setFont:function(_6e){this.fontStyle=typeof _6e=="string"?g.splitFontString(_6e):g.makeParameters(g.defaultFont,_6e);this._setFont();return this;},_setText:function(){this.bbox=null;var r=this.rawNode,s=this.text,p=null,t=null,c=r.childNodes;for(var i=0;i<c.length;++i){var tag=c[i].tagName;if(tag=="path"){p=c[i];if(t){break;}}else{if(tag=="textpath"){t=c[i];if(p){break;}}}}if(!p){p=this.rawNode.ownerDocument.createElement("v:path");r.appendChild(p);}if(!t){t=this.rawNode.ownerDocument.createElement("v:textpath");r.appendChild(t);}p.textPathOk=true;t.on=true;var a=_7.text_alignment[s.align];t.style["v-text-align"]=a?a:"left";t.style["text-decoration"]=s.decoration;t.style["v-rotate-letters"]=s.rotated;t.style["v-text-kern"]=s.kerning;t.string=s.text;},_setFont:function(){var f=this.fontStyle,c=this.rawNode.childNodes;for(var i=0;i<c.length;++i){if(c[i].tagName=="textpath"){c[i].style.font=g.makeFontString(f);break;}}}});_7.TextPath.nodeType="shape";_4.declare("dojox.gfx.vml.Surface",gs.Surface,{constructor:function(){gs.Container._init.call(this);},setDimensions:function(_6f,_70){this.width=g.normalizedLength(_6f);this.height=g.normalizedLength(_70);if(!this.rawNode){return this;}var cs=this.clipNode.style,r=this.rawNode,rs=r.style,bs=this.bgNode.style,ps=this._parent.style,i;ps.width=_6f;ps.height=_70;cs.width=_6f;cs.height=_70;cs.clip="rect(0px "+_6f+"px "+_70+"px 0px)";rs.width=_6f;rs.height=_70;r.coordsize=_6f+" "+_70;bs.width=_6f;bs.height=_70;for(i=0;i<this.children.length;++i){this.children[i]._setDimensions(_6f,_70);}return this;},getDimensions:function(){var t=this.rawNode?{width:g.normalizedLength(this.rawNode.style.width),height:g.normalizedLength(this.rawNode.style.height)}:null;if(t.width<=0){t.width=this.width;}if(t.height<=0){t.height=this.height;}return t;}});_7.createSurface=function(_71,_72,_73){if(!_72&&!_73){var pos=d.position(_71);_72=_72||pos.w;_73=_73||pos.h;}if(typeof _72=="number"){_72=_72+"px";}if(typeof _73=="number"){_73=_73+"px";}var s=new _7.Surface(),p=d.byId(_71),c=s.clipNode=p.ownerDocument.createElement("div"),r=s.rawNode=p.ownerDocument.createElement("v:group"),cs=c.style,rs=r.style;if(d.isIE>7){rs.display="inline-block";}s._parent=p;s._nodes.push(c);p.style.width=_72;p.style.height=_73;cs.position="absolute";cs.width=_72;cs.height=_73;cs.clip="rect(0px "+_72+" "+_73+" 0px)";rs.position="absolute";rs.width=_72;rs.height=_73;r.coordsize=(_72==="100%"?_72:parseFloat(_72))+" "+(_73==="100%"?_73:parseFloat(_73));r.coordorigin="0 0";var b=s.bgNode=r.ownerDocument.createElement("v:rect"),bs=b.style;bs.left=bs.top=0;bs.width=rs.width;bs.height=rs.height;b.filled=b.stroked="f";r.appendChild(b);c.appendChild(r);p.appendChild(c);s.width=g.normalizedLength(_72);s.height=g.normalizedLength(_73);return s;};function _74(_75,f,o){o=o||d.global;f.call(o,_75);if(_75 instanceof g.Surface||_75 instanceof g.Group){d.forEach(_75.children,function(_76){_74(_76,f,o);});}};var C=gs.Container,_77={add:function(_78){if(this!=_78.getParent()){var _79=_78.getParent();if(_79){_79.remove(_78);}this.rawNode.appendChild(_78.rawNode);C.add.apply(this,arguments);_74(this,function(s){if(typeof (s.getFont)=="function"){s.setShape(s.getShape());s.setFont(s.getFont());}if(typeof (s.setFill)=="function"){s.setFill(s.getFill());s.setStroke(s.getStroke());}});}return this;},remove:function(_7a,_7b){if(this==_7a.getParent()){if(this.rawNode==_7a.rawNode.parentNode){this.rawNode.removeChild(_7a.rawNode);}C.remove.apply(this,arguments);}return this;},clear:function(){var r=this.rawNode;while(r.firstChild!=r.lastChild){if(r.firstChild!=this.bgNode){r.removeChild(r.firstChild);}if(r.lastChild!=this.bgNode){r.removeChild(r.lastChild);}}return C.clear.apply(this,arguments);},_moveChildToFront:C._moveChildToFront,_moveChildToBack:C._moveChildToBack};var _7c={createGroup:function(){var _7d=this.createObject(_7.Group,null);var r=_7d.rawNode.ownerDocument.createElement("v:rect");r.style.left=r.style.top=0;r.style.width=_7d.rawNode.style.width;r.style.height=_7d.rawNode.style.height;r.filled=r.stroked="f";_7d.rawNode.appendChild(r);_7d.bgNode=r;return _7d;},createImage:function(_7e){if(!this.rawNode){return null;}var _7f=new _7.Image(),doc=this.rawNode.ownerDocument,_80=doc.createElement("v:rect");_80.stroked="f";_80.style.width=this.rawNode.style.width;_80.style.height=this.rawNode.style.height;var img=doc.createElement("v:imagedata");_80.appendChild(img);_7f.setRawNode(_80);this.rawNode.appendChild(_80);_7f.setShape(_7e);this.add(_7f);return _7f;},createRect:function(_81){if(!this.rawNode){return null;}var _82=new _7.Rect,_83=this.rawNode.ownerDocument.createElement("v:roundrect");if(d.isIE>7){_83.style.display="inline-block";}_82.setRawNode(_83);this.rawNode.appendChild(_83);_82.setShape(_81);this.add(_82);return _82;},createObject:function(_84,_85){if(!this.rawNode){return null;}var _86=new _84(),_87=this.rawNode.ownerDocument.createElement("v:"+_84.nodeType);_86.setRawNode(_87);this.rawNode.appendChild(_87);switch(_84){case _7.Group:case _7.Line:case _7.Polyline:case _7.Image:case _7.Text:case _7.Path:case _7.TextPath:this._overrideSize(_87);}_86.setShape(_85);this.add(_86);return _86;},_overrideSize:function(_88){var s=this.rawNode.style,w=s.width,h=s.height;_88.style.width=w;_88.style.height=h;_88.coordsize=parseInt(w)+" "+parseInt(h);}};d.extend(_7.Group,_77);d.extend(_7.Group,gs.Creator);d.extend(_7.Group,_7c);d.extend(_7.Surface,_77);d.extend(_7.Surface,gs.Creator);d.extend(_7.Surface,_7c);if(g.loadAndSwitch==="vml"){g.switchTo("vml");delete g.loadAndSwitch;}})();}}};});