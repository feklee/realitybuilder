/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


realitybuilderDojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.grid.enhanced.plugins.AutoScroll"],["require","dojox.grid.enhanced._Plugin"],["require","dojox.grid._RowSelector"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.grid.enhanced.plugins.AutoScroll"]){_4._hasResource["dojox.grid.enhanced.plugins.AutoScroll"]=true;_4.provide("dojox.grid.enhanced.plugins.AutoScroll");_4.require("dojox.grid.enhanced._Plugin");_4.require("dojox.grid._RowSelector");_4.declare("dojox.grid.enhanced.plugins.AutoScroll",_6.grid.enhanced._Plugin,{name:"autoScroll",autoScrollInterval:1000,autoScrollMargin:30,constructor:function(_7,_8){this.grid=_7;this.readyForAutoScroll=false;this._scrolling=false;_8=_4.isObject(_8)?_8:{};if("interval" in _8){this.autoScrollInterval=_8.interval;}if("margin" in _8){this.autoScrollMargin=_8.margin;}this._initEvents();this._mixinGrid();},_initEvents:function(){var g=this.grid;this.connect(g,"onCellMouseDown",function(){this.readyForAutoScroll=true;});this.connect(g,"onHeaderCellMouseDown",function(){this.readyForAutoScroll=true;});this.connect(g,"onRowSelectorMouseDown",function(){this.readyForAutoScroll=true;});this.connect(_4.doc,"onmouseup",function(_9){this._manageAutoScroll(true);this.readyForAutoScroll=false;});this.connect(_4.doc,"onmousemove",function(_a){if(this.readyForAutoScroll){this._event=_a;var _b=_4.position(g.domNode),hh=g._getHeaderHeight(),_c=this.autoScrollMargin,ey=_a.clientY,ex=_a.clientX,gy=_b.y,gx=_b.x,gh=_b.h,gw=_b.w;if(ex>=gx&&ex<=gx+gw){if(ey>=gy+hh&&ey<gy+hh+_c){this._manageAutoScroll(false,true,false);return;}else{if(ey>gy+gh-_c&&ey<=gy+gh){this._manageAutoScroll(false,true,true);return;}else{if(ey>=gy&&ey<=gy+gh){var _d=_4.some(g.views.views,function(_e,i){if(_e instanceof _6.grid._RowSelector){return false;}var _f=_4.position(_e.domNode);if(ex<_f.x+_c&&ex>=_f.x){this._manageAutoScroll(false,false,false,_e);return true;}else{if(ex>_f.x+_f.w-_c&&ex<_f.x+_f.w){this._manageAutoScroll(false,false,true,_e);return true;}}return false;},this);if(_d){return;}}}}}this._manageAutoScroll(true);}});},_mixinGrid:function(){var g=this.grid;g.onStartAutoScroll=function(){};g.onEndAutoScroll=function(){};},_fireEvent:function(_10,_11){var g=this.grid;switch(_10){case "start":g.onStartAutoScroll.apply(g,_11);break;case "end":g.onEndAutoScroll.apply(g,_11);break;}},_manageAutoScroll:function(_12,_13,_14,_15){if(_12){this._scrolling=false;clearInterval(this._handler);}else{if(!this._scrolling){this._scrolling=true;this._fireEvent("start",[_13,_14,_15]);this._autoScroll(_13,_14,_15);this._handler=setInterval(_4.hitch(this,"_autoScroll",_13,_14,_15),this.autoScrollInterval);}}},_autoScroll:function(_16,_17,_18){var g=this.grid,_19=null;if(_16){var _1a=g.scroller.firstVisibleRow+(_17?1:-1);if(_1a>=0&&_1a<g.rowCount){g.scrollToRow(_1a);_19=_1a;}}else{_19=this._scrollColumn(_17,_18);}if(_19!==null){this._fireEvent("end",[_16,_17,_18,_19,this._event]);}},_scrollColumn:function(_1b,_1c){var _1d=_1c.scrollboxNode,_1e=null;if(_1d.clientWidth<_1d.scrollWidth){var _1f=_4.filter(this.grid.layout.cells,function(_20){return !_20.hidden;});var _21=_4.position(_1c.domNode);var _22,_23,_24,i;if(_1b){_22=_1d.clientWidth;for(i=0;i<_1f.length;++i){_24=_4.position(_1f[i].getHeaderNode());_23=_24.x-_21.x+_24.w;if(_23>_22){_1e=_1f[i].index;_1d.scrollLeft+=_23-_22+10;break;}}}else{_22=0;for(i=_1f.length-1;i>=0;--i){_24=_4.position(_1f[i].getHeaderNode());_23=_24.x-_21.x;if(_23<_22){_1e=_1f[i].index;_1d.scrollLeft+=_23-_22-10;break;}}}}return _1e;}});_6.grid.EnhancedGrid.registerPlugin(_6.grid.enhanced.plugins.AutoScroll);}}};});