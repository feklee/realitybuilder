/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


realityBuilderDojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.layout.GridContainer"],["require","dojox.layout.GridContainerLite"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.layout.GridContainer"]){_4._hasResource["dojox.layout.GridContainer"]=true;_4.provide("dojox.layout.GridContainer");_4.require("dojox.layout.GridContainerLite");_4.declare("dojox.layout.GridContainer",_6.layout.GridContainerLite,{hasResizableColumns:true,liveResizeColumns:false,minColWidth:20,minChildWidth:150,mode:"right",isRightFixed:false,isLeftFixed:false,startup:function(){this.inherited(arguments);if(this.hasResizableColumns){for(var i=0;i<this._grid.length-1;i++){this._createGrip(i);}if(!this.getParent()){_4.ready(_4.hitch(this,"_placeGrips"));}}},resizeChildAfterDrop:function(_7,_8,_9){if(this.inherited(arguments)){this._placeGrips();}},onShow:function(){this.inherited(arguments);this._placeGrips();},resize:function(){this.inherited(arguments);if(this._isShown()&&this.hasResizableColumns){this._placeGrips();}},_createGrip:function(_a){var _b=this._grid[_a],_c=_4.create("div",{"class":"gridContainerGrip"},this.domNode);_b.grip=_c;_b.gripHandler=[this.connect(_c,"onmouseover",function(e){var _d=false;for(var i=0;i<this._grid.length-1;i++){if(_4.hasClass(this._grid[i].grip,"gridContainerGripShow")){_d=true;break;}}if(!_d){_4.removeClass(e.target,"gridContainerGrip");_4.addClass(e.target,"gridContainerGripShow");}})[0],this.connect(_c,"onmouseout",function(e){if(!this._isResized){_4.removeClass(e.target,"gridContainerGripShow");_4.addClass(e.target,"gridContainerGrip");}})[0],this.connect(_c,"onmousedown","_resizeColumnOn")[0],this.connect(_c,"ondblclick","_onGripDbClick")[0]];},_placeGrips:function(){var _e,_f,_10=0,_11;var _12=this.domNode.style.overflowY;_4.forEach(this._grid,function(_13){if(_13.grip){_11=_13.grip;if(!_e){_e=_11.offsetWidth/2;}_10+=_4.marginBox(_13.node).w;_4.style(_11,"left",(_10-_e)+"px");if(!_f){_f=_4.contentBox(this.gridNode).h;}if(_f>0){_4.style(_11,"height",_f+"px");}}},this);},_onGripDbClick:function(){this._updateColumnsWidth(this._dragManager);this.resize();},_resizeColumnOn:function(e){this._activeGrip=e.target;this._initX=e.pageX;e.preventDefault();_4.body().style.cursor="ew-resize";this._isResized=true;var _14=[];var _15;var i;for(i=0;i<this._grid.length;i++){_14[i]=_4.contentBox(this._grid[i].node).w;}this._oldTabSize=_14;for(i=0;i<this._grid.length;i++){_15=this._grid[i];if(this._activeGrip==_15.grip){this._currentColumn=_15.node;this._currentColumnWidth=_14[i];this._nextColumn=this._grid[i+1].node;this._nextColumnWidth=_14[i+1];}_15.node.style.width=_14[i]+"px";}var _16=function(_17,_18){var _19=0;var _1a=0;_4.forEach(_17,function(_1b){if(_1b.nodeType==1){var _1c=_4.getComputedStyle(_1b);var _1d=(_4.isIE)?_18:parseInt(_1c.minWidth);_1a=_1d+parseInt(_1c.marginLeft)+parseInt(_1c.marginRight);if(_19<_1a){_19=_1a;}}});return _19;};var _1e=_16(this._currentColumn.childNodes,this.minChildWidth);var _1f=_16(this._nextColumn.childNodes,this.minChildWidth);var _20=Math.round((_4.marginBox(this.gridContainerTable).w*this.minColWidth)/100);this._currentMinCol=_1e;this._nextMinCol=_1f;if(_20>this._currentMinCol){this._currentMinCol=_20;}if(_20>this._nextMinCol){this._nextMinCol=_20;}this._connectResizeColumnMove=_4.connect(_4.doc,"onmousemove",this,"_resizeColumnMove");this._connectOnGripMouseUp=_4.connect(_4.doc,"onmouseup",this,"_onGripMouseUp");},_onGripMouseUp:function(){_4.body().style.cursor="default";_4.disconnect(this._connectResizeColumnMove);_4.disconnect(this._connectOnGripMouseUp);this._connectOnGripMouseUp=this._connectResizeColumnMove=null;if(this._activeGrip){_4.removeClass(this._activeGrip,"gridContainerGripShow");_4.addClass(this._activeGrip,"gridContainerGrip");}this._isResized=false;},_resizeColumnMove:function(e){e.preventDefault();if(!this._connectResizeColumnOff){_4.disconnect(this._connectOnGripMouseUp);this._connectOnGripMouseUp=null;this._connectResizeColumnOff=_4.connect(_4.doc,"onmouseup",this,"_resizeColumnOff");}var d=e.pageX-this._initX;if(d==0){return;}if(!(this._currentColumnWidth+d<this._currentMinCol||this._nextColumnWidth-d<this._nextMinCol)){this._currentColumnWidth+=d;this._nextColumnWidth-=d;this._initX=e.pageX;this._activeGrip.style.left=parseInt(this._activeGrip.style.left)+d+"px";if(this.liveResizeColumns){this._currentColumn.style["width"]=this._currentColumnWidth+"px";this._nextColumn.style["width"]=this._nextColumnWidth+"px";this.resize();}}},_resizeColumnOff:function(e){_4.body().style.cursor="default";_4.disconnect(this._connectResizeColumnMove);_4.disconnect(this._connectResizeColumnOff);this._connectResizeColumnOff=this._connectResizeColumnMove=null;if(!this.liveResizeColumns){this._currentColumn.style["width"]=this._currentColumnWidth+"px";this._nextColumn.style["width"]=this._nextColumnWidth+"px";}var _21=[],_22=[],_23=this.gridContainerTable.clientWidth,_24,_25=false,i;for(i=0;i<this._grid.length;i++){_24=this._grid[i].node;if(_4.isIE){_21[i]=_4.marginBox(_24).w;_22[i]=_4.contentBox(_24).w;}else{_21[i]=_4.contentBox(_24).w;_22=_21;}}for(i=0;i<_22.length;i++){if(_22[i]!=this._oldTabSize[i]){_25=true;break;}}if(_25){var mul=_4.isIE?100:10000;for(i=0;i<this._grid.length;i++){this._grid[i].node.style.width=Math.round((100*mul*_21[i])/_23)/mul+"%";}this.resize();}if(this._activeGrip){_4.removeClass(this._activeGrip,"gridContainerGripShow");_4.addClass(this._activeGrip,"gridContainerGrip");}this._isResized=false;},setColumns:function(_26){var z,j;if(_26>0){var _27=this._grid.length,_28=_27-_26;if(_28>0){var _29=[],_2a,_2b,end,_2c;if(this.mode=="right"){end=(this.isLeftFixed&&_27>0)?1:0;_2b=(this.isRightFixed)?_27-2:_27-1;for(z=_2b;z>=end;z--){_2c=0;_2a=this._grid[z].node;for(j=0;j<_2a.childNodes.length;j++){if(_2a.childNodes[j].nodeType==1&&!(_2a.childNodes[j].id=="")){_2c++;break;}}if(_2c==0){_29[_29.length]=z;}if(_29.length>=_28){this._deleteColumn(_29);break;}}if(_29.length<_28){_4.publish("/dojox/layout/gridContainer/noEmptyColumn",[this]);}}else{_2b=(this.isLeftFixed&&_27>0)?1:0;end=(this.isRightFixed)?_27-1:_27;for(z=_2b;z<end;z++){_2c=0;_2a=this._grid[z].node;for(j=0;j<_2a.childNodes.length;j++){if(_2a.childNodes[j].nodeType==1&&!(_2a.childNodes[j].id=="")){_2c++;break;}}if(_2c==0){_29[_29.length]=z;}if(_29.length>=_28){this._deleteColumn(_29);break;}}if(_29.length<_28){_4.publish("/dojox/layout/gridContainer/noEmptyColumn",[this]);}}}else{if(_28<0){this._addColumn(Math.abs(_28));}}if(this.hasResizableColumns){this._placeGrips();}}},_addColumn:function(_2d){var _2e=this._grid,_2f,_30,_31,_32,_33=(this.mode=="right"),_34=this.acceptTypes.join(","),m=this._dragManager;if(this.hasResizableColumns&&((!this.isRightFixed&&_33)||(this.isLeftFixed&&!_33&&this.nbZones==1))){this._createGrip(_2e.length-1);}for(var i=0;i<_2d;i++){_30=_4.create("td",{"class":"gridContainerZone dojoxDndArea","accept":_34,"id":this.id+"_dz"+this.nbZones});_32=_2e.length;if(_33){if(this.isRightFixed){_31=_32-1;_2e.splice(_31,0,{"node":_2e[_31].node.parentNode.insertBefore(_30,_2e[_31].node)});}else{_31=_32;_2e.push({"node":this.gridNode.appendChild(_30)});}}else{if(this.isLeftFixed){_31=(_32==1)?0:1;this._grid.splice(1,0,{"node":this._grid[_31].node.parentNode.appendChild(_30,this._grid[_31].node)});_31=1;}else{_31=_32-this.nbZones;this._grid.splice(_31,0,{"node":_2e[_31].node.parentNode.insertBefore(_30,_2e[_31].node)});}}if(this.hasResizableColumns){if((!_33&&this.nbZones!=1)||(!_33&&this.nbZones==1&&!this.isLeftFixed)||(_33&&i<_2d-1)||(_33&&i==_2d-1&&this.isRightFixed)){this._createGrip(_31);}}m.registerByNode(_2e[_31].node);this.nbZones++;}this._updateColumnsWidth(m);},_deleteColumn:function(_35){var _36,_37,_38,_39=0,_3a=_35.length,m=this._dragManager;for(var i=0;i<_3a;i++){_38=(this.mode=="right")?_35[i]:_35[i]-_39;_37=this._grid[_38];if(this.hasResizableColumns&&_37.grip){_4.forEach(_37.gripHandler,function(_3b){_4.disconnect(_3b);});_4.destroy(this.domNode.removeChild(_37.grip));_37.grip=null;}m.unregister(_37.node);_4.destroy(this.gridNode.removeChild(_37.node));this._grid.splice(_38,1);this.nbZones--;_39++;}var _3c=this._grid[this.nbZones-1];if(_3c.grip){_4.forEach(_3c.gripHandler,_4.disconnect);_4.destroy(this.domNode.removeChild(_3c.grip));_3c.grip=null;}this._updateColumnsWidth(m);},_updateColumnsWidth:function(_3d){this.inherited(arguments);_3d._dropMode.updateAreas(_3d._areaList);},destroy:function(){_4.unsubscribe(this._dropHandler);this.inherited(arguments);}});}}};});