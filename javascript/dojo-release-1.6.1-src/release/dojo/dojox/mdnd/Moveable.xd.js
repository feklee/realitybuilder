/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


realityBuilderDojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.mdnd.Moveable"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.mdnd.Moveable"]){_4._hasResource["dojox.mdnd.Moveable"]=true;_4.provide("dojox.mdnd.Moveable");_4.declare("dojox.mdnd.Moveable",null,{handle:null,skip:true,dragDistance:3,constructor:function(_7,_8){this.node=_4.byId(_8);this.d=this.node.ownerDocument;if(!_7){_7={};}this.handle=_7.handle?_4.byId(_7.handle):null;if(!this.handle){this.handle=this.node;}this.skip=_7.skip;this.events=[_4.connect(this.handle,"onmousedown",this,"onMouseDown")];if(_6.mdnd.autoScroll){this.autoScroll=_6.mdnd.autoScroll;}},isFormElement:function(e){var t=e.target;if(t.nodeType==3){t=t.parentNode;}return " a button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;},onMouseDown:function(e){if(this._isDragging){return;}var _9=_4.isIE?(e.button==1):(e.which==1);if(!_9){return;}if(this.skip&&this.isFormElement(e)){return;}if(this.autoScroll){this.autoScroll.setAutoScrollNode(this.node);this.autoScroll.setAutoScrollMaxPage();}this.events.push(_4.connect(this.d,"onmouseup",this,"onMouseUp"));this.events.push(_4.connect(this.d,"onmousemove",this,"onFirstMove"));this._selectStart=_4.connect(_4.body(),"onselectstart",_4.stopEvent);this._firstX=e.clientX;this._firstY=e.clientY;_4.stopEvent(e);},onFirstMove:function(e){_4.stopEvent(e);var d=(this._firstX-e.clientX)*(this._firstX-e.clientX)+(this._firstY-e.clientY)*(this._firstY-e.clientY);if(d>this.dragDistance*this.dragDistance){this._isDragging=true;_4.disconnect(this.events.pop());_4.style(this.node,"width",_4.contentBox(this.node).w+"px");this.initOffsetDrag(e);this.events.push(_4.connect(this.d,"onmousemove",this,"onMove"));}},initOffsetDrag:function(e){this.offsetDrag={"l":e.pageX,"t":e.pageY};var s=this.node.style;var _a=_4.position(this.node,true);this.offsetDrag.l=_a.x-this.offsetDrag.l;this.offsetDrag.t=_a.y-this.offsetDrag.t;var _b={"x":_a.x,"y":_a.y};this.size={"w":_a.w,"h":_a.h};this.onDragStart(this.node,_b,this.size);},onMove:function(e){_4.stopEvent(e);if(_4.isIE==8&&new Date()-this.date<20){return;}if(this.autoScroll){this.autoScroll.checkAutoScroll(e);}var _c={"x":this.offsetDrag.l+e.pageX,"y":this.offsetDrag.t+e.pageY};var s=this.node.style;s.left=_c.x+"px";s.top=_c.y+"px";this.onDrag(this.node,_c,this.size,{"x":e.pageX,"y":e.pageY});if(_4.isIE==8){this.date=new Date();}},onMouseUp:function(e){if(this._isDragging){_4.stopEvent(e);this._isDragging=false;if(this.autoScroll){this.autoScroll.stopAutoScroll();}delete this.onMove;this.onDragEnd(this.node);this.node.focus();}_4.disconnect(this.events.pop());_4.disconnect(this.events.pop());},onDragStart:function(_d,_e,_f){},onDragEnd:function(_10){},onDrag:function(_11,_12,_13,_14){},destroy:function(){_4.forEach(this.events,_4.disconnect);this.events=this.node=null;}});}}};});