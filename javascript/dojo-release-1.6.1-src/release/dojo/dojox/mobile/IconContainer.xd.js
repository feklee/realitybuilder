/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


realitybuilderDojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.mobile.IconContainer"],["require","dojox.mobile"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.mobile.IconContainer"]){_4._hasResource["dojox.mobile.IconContainer"]=true;_4.provide("dojox.mobile.IconContainer");_4.require("dojox.mobile");_4.declare("dojox.mobile.IconContainer",_5._WidgetBase,{defaultIcon:"",transition:"below",pressedIconOpacity:0.4,iconBase:"",iconPos:"",back:"Home",label:"My Application",single:false,buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||_4.doc.createElement("UL");this.domNode.className="mblIconContainer";var t=this._terminator=_4.create("LI");t.className="mblIconItemTerminator";t.innerHTML="&nbsp;";this.domNode.appendChild(t);},_setupSubNodes:function(ul){var _7=this.domNode.childNodes.length-1;for(i=0;i<_7;i++){child=this.domNode.childNodes[i];if(child.nodeType!=1){continue;}w=_5.byNode(child);if(this.single){w.subNode.firstChild.style.display="none";}ul.appendChild(w.subNode);}},startup:function(){var ul,i,_8,_9,w;if(this.transition=="below"){this._setupSubNodes(this.domNode);}else{var _a=new _6.mobile.View({id:this.id+"_mblApplView"});var _b=this;_a.onAfterTransitionIn=function(_c,_d,_e,_f,_10){_b._opening._open_1();};_a.domNode.style.visibility="hidden";var _11=_a._heading=new _6.mobile.Heading({back:this.back,label:this.label,moveTo:this.domNode.parentNode.id,transition:this.transition});_a.addChild(_11);ul=_4.doc.createElement("UL");ul.className="mblIconContainer";ul.style.marginTop="0px";this._setupSubNodes(ul);_a.domNode.appendChild(ul);_4.doc.body.appendChild(_a.domNode);_11.startup();}},closeAll:function(){var len=this.domNode.childNodes.length;for(var i=0;i<len;i++){child=this.domNode.childNodes[i];if(child.nodeType!=1){continue;}if(child==this._terminator){break;}w=_5.byNode(child);w.containerNode.parentNode.style.display="none";w.setOpacity(w.iconNode,1);}},addChild:function(_12){this.domNode.insertBefore(_12.domNode,this._terminator);_12.transition=this.transition;if(this.transition=="below"){this.domNode.appendChild(_12.subNode);}_12.inheritParams();_12.setIcon();}});_4.declare("dojox.mobile.IconItem",_6.mobile.AbstractItem,{lazy:false,requires:"",timeout:10,templateString:"<li class=\"mblIconItem\">"+"<div class=\"mblIconArea\" dojoAttachPoint=\"iconDivNode\">"+"<div><img src=\"${icon}\" dojoAttachPoint=\"iconNode\"></div>${label}"+"</div>"+"</li>",templateStringSub:"<li class=\"mblIconItemSub\" lazy=\"${lazy}\" style=\"display:none;\" dojoAttachPoint=\"contentNode\">"+"<h2 class=\"mblIconContentHeading\" dojoAttachPoint=\"closeNode\">"+"<div class=\"mblBlueMinusButton\" style=\"position:absolute;left:4px;top:2px;\" dojoAttachPoint=\"closeIconNode\"><div></div></div>${label}"+"</h2>"+"<div class=\"mblContent\" dojoAttachPoint=\"containerNode\"></div>"+"</li>",createTemplate:function(s){_4.forEach(["lazy","icon","label"],function(v){while(s.indexOf("${"+v+"}")!=-1){s=s.replace("${"+v+"}",this[v]);}},this);var div=_4.doc.createElement("DIV");div.innerHTML=s;var _13=div.getElementsByTagName("*");var i,len,s1;len=_13.length;for(i=0;i<len;i++){s1=_13[i].getAttribute("dojoAttachPoint");if(s1){this[s1]=_13[i];}}var _14=div.removeChild(div.firstChild);div=null;return _14;},buildRendering:function(){this.inheritParams();this.domNode=this.createTemplate(this.templateString);this.subNode=this.createTemplate(this.templateStringSub);this.subNode._parentNode=this.domNode;if(this.srcNodeRef){for(var i=0,len=this.srcNodeRef.childNodes.length;i<len;i++){this.containerNode.appendChild(this.srcNodeRef.removeChild(this.srcNodeRef.firstChild));}this.srcNodeRef.parentNode.replaceChild(this.domNode,this.srcNodeRef);this.srcNodeRef=null;}this.setIcon();},setIcon:function(){this.iconNode.src=this.icon;_6.mobile.setupIcon(this.iconNode,this.iconPos);},postCreate:function(){this.connect(this.iconNode,"onmousedown","onMouseDownIcon");this.connect(this.iconNode,"onclick","iconClicked");this.connect(this.closeIconNode,"onclick","closeIconClicked");this.connect(this.iconNode,"onerror","onError");},highlight:function(){_4.addClass(this.iconDivNode,"mblVibrate");if(this.timeout>0){var _15=this;setTimeout(function(){_15.unhighlight();},this.timeout*1000);}},unhighlight:function(){_4.removeClass(this.iconDivNode,"mblVibrate");},setOpacity:function(_16,val){_16.style.opacity=val;_16.style.mozOpacity=val;_16.style.khtmlOpacity=val;_16.style.webkitOpacity=val;},instantiateWidget:function(e){var _17=this.containerNode.getElementsByTagName("*");var len=_17.length;var s;for(var i=0;i<len;i++){s=_17[i].getAttribute("dojoType");if(s){_4["require"](s);}}if(len>0){(_6.mobile.parser||_4.parser).parse(this.containerNode);}this.lazy=false;},isOpen:function(e){return this.containerNode.style.display!="none";},onMouseDownIcon:function(e){this.setOpacity(this.iconNode,this.getParentWidget().pressedIconOpacity);},iconClicked:function(e){if(e){setTimeout(_4.hitch(this,function(d){this.iconClicked();}),0);return;}if(this.moveTo||this.href||this.url){this.transitionTo(this.moveTo,this.href,this.url);setTimeout(_4.hitch(this,function(d){this.setOpacity(this.iconNode,1);}),1500);}else{this.open();}},closeIconClicked:function(e){if(e){setTimeout(_4.hitch(this,function(d){this.closeIconClicked();}),0);return;}this.close();},open:function(){var _18=this.getParentWidget();if(this.transition=="below"){if(_18.single){_18.closeAll();this.setOpacity(this.iconNode,this.getParentWidget().pressedIconOpacity);}this._open_1();}else{_18._opening=this;if(_18.single){_18.closeAll();var _19=_5.byId(_18.id+"_mblApplView");_19._heading.setLabel(this.label);}this.transitionTo(_18.id+"_mblApplView");}},_open_1:function(){this.contentNode.style.display="";this.unhighlight();if(this.lazy){if(this.requires){_4.forEach(this.requires.split(/,/),function(c){_4["require"](c);});}this.instantiateWidget();}this.contentNode.scrollIntoView();this.onOpen();},close:function(){if(_4.isWebKit){var t=this.domNode.parentNode.offsetWidth/8;var y=this.iconNode.offsetLeft;var pos=0;for(var i=1;i<=3;i++){if(t*(2*i-1)<y&&y<=t*(2*(i+1)-1)){pos=i;break;}}_4.addClass(this.containerNode.parentNode,"mblCloseContent mblShrink"+pos);}else{this.containerNode.parentNode.style.display="none";}this.setOpacity(this.iconNode,1);this.onClose();},onOpen:function(){},onClose:function(){},onError:function(){this.iconNode.src=this.getParentWidget().defaultIcon;}});}}};});