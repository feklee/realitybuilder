/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


realitybuilderDojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.widget.Portlet"],["require","dijit.TitlePane"],["require","dojo.fx"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.widget.Portlet"]){_4._hasResource["dojox.widget.Portlet"]=true;_4.experimental("dojox.widget.Portlet");_4.provide("dojox.widget.Portlet");_4.require("dijit.TitlePane");_4.require("dojo.fx");_4.declare("dojox.widget.Portlet",[_5.TitlePane,_5._Container],{resizeChildren:true,closable:true,_parents:null,_size:null,dragRestriction:false,buildRendering:function(){this.inherited(arguments);_4.style(this.domNode,"visibility","hidden");},postCreate:function(){this.inherited(arguments);_4.addClass(this.domNode,"dojoxPortlet");_4.removeClass(this.arrowNode,"dijitArrowNode");_4.addClass(this.arrowNode,"dojoxPortletIcon dojoxArrowDown");_4.addClass(this.titleBarNode,"dojoxPortletTitle");_4.addClass(this.hideNode,"dojoxPortletContentOuter");_4.addClass(this.domNode,"dojoxPortlet-"+(!this.dragRestriction?"movable":"nonmovable"));var _7=this;if(this.resizeChildren){this.subscribe("/dnd/drop",function(){_7._updateSize();});this.subscribe("/Portlet/sizechange",function(_8){_7.onSizeChange(_8);});this.connect(window,"onresize",function(){_7._updateSize();});var _9=_4.hitch(this,function(id,_a){var _b=_5.byId(id);if(_b.selectChild){var s=this.subscribe(id+"-selectChild",function(_c){var n=_7.domNode.parentNode;while(n){if(n==_c.domNode){_7.unsubscribe(s);_7._updateSize();break;}n=n.parentNode;}});var _d=_5.byId(_a);if(_b&&_d){_7._parents.push({parent:_b,child:_d});}}});var _e;this._parents=[];for(var p=this.domNode.parentNode;p!=null;p=p.parentNode){var id=p.getAttribute?p.getAttribute("widgetId"):null;if(id){_9(id,_e);_e=id;}}}this.connect(this.titleBarNode,"onmousedown",function(_f){if(_4.hasClass(_f.target,"dojoxPortletIcon")){_4.stopEvent(_f);return false;}return true;});this.connect(this._wipeOut,"onEnd",function(){_7._publish();});this.connect(this._wipeIn,"onEnd",function(){_7._publish();});if(this.closable){this.closeIcon=this._createIcon("dojoxCloseNode","dojoxCloseNodeHover",_4.hitch(this,"onClose"));_4.style(this.closeIcon,"display","");}},startup:function(){if(this._started){return;}var _10=this.getChildren();this._placeSettingsWidgets();_4.forEach(_10,function(_11){try{if(!_11.started&&!_11._started){_11.startup();}}catch(e){console.log(this.id+":"+this.declaredClass,e);}});this.inherited(arguments);_4.style(this.domNode,"visibility","visible");},_placeSettingsWidgets:function(){_4.forEach(this.getChildren(),_4.hitch(this,function(_12){if(_12.portletIconClass&&_12.toggle&&!_12.attr("portlet")){this._createIcon(_12.portletIconClass,_12.portletIconHoverClass,_4.hitch(_12,"toggle"));_4.place(_12.domNode,this.containerNode,"before");_12.attr("portlet",this);this._settingsWidget=_12;}}));},_createIcon:function(_13,_14,fn){var _15=_4.create("div",{"class":"dojoxPortletIcon "+_13,"waiRole":"presentation"});_4.place(_15,this.arrowNode,"before");this.connect(_15,"onclick",fn);if(_14){this.connect(_15,"onmouseover",function(){_4.addClass(_15,_14);});this.connect(_15,"onmouseout",function(){_4.removeClass(_15,_14);});}return _15;},onClose:function(evt){_4.style(this.domNode,"display","none");},onSizeChange:function(_16){if(_16==this){return;}this._updateSize();},_updateSize:function(){if(!this.open||!this._started||!this.resizeChildren){return;}if(this._timer){clearTimeout(this._timer);}this._timer=setTimeout(_4.hitch(this,function(){var _17={w:_4.style(this.domNode,"width"),h:_4.style(this.domNode,"height")};for(var i=0;i<this._parents.length;i++){var p=this._parents[i];var sel=p.parent.selectedChildWidget;if(sel&&sel!=p.child){return;}}if(this._size){if(this._size.w==_17.w&&this._size.h==_17.h){return;}}this._size=_17;var fns=["resize","layout"];this._timer=null;var _18=this.getChildren();_4.forEach(_18,function(_19){for(var i=0;i<fns.length;i++){if(_4.isFunction(_19[fns[i]])){try{_19[fns[i]]();}catch(e){console.log(e);}break;}}});this.onUpdateSize();}),100);},onUpdateSize:function(){},_publish:function(){_4.publish("/Portlet/sizechange",[this]);},_onTitleClick:function(evt){if(evt.target==this.arrowNode){this.inherited(arguments);}},addChild:function(_1a){this._size=null;this.inherited(arguments);if(this._started){this._placeSettingsWidgets();this._updateSize();}if(this._started&&!_1a.started&&!_1a._started){_1a.startup();}},destroyDescendants:function(_1b){this.inherited(arguments);if(this._settingsWidget){this._settingsWidget.destroyRecursive(_1b);}},destroy:function(){if(this._timer){clearTimeout(this._timer);}this.inherited(arguments);},_setCss:function(){this.inherited(arguments);_4.style(this.arrowNode,"display",this.toggleable?"":"none");}});_4.declare("dojox.widget.PortletSettings",[_5._Container,_5.layout.ContentPane],{portletIconClass:"dojoxPortletSettingsIcon",portletIconHoverClass:"dojoxPortletSettingsIconHover",postCreate:function(){_4.style(this.domNode,"display","none");_4.addClass(this.domNode,"dojoxPortletSettingsContainer");_4.removeClass(this.domNode,"dijitContentPane");},_setPortletAttr:function(_1c){this.portlet=_1c;},toggle:function(){var n=this.domNode;if(_4.style(n,"display")=="none"){_4.style(n,{"display":"block","height":"1px","width":"auto"});_4.fx.wipeIn({node:n}).play();}else{_4.fx.wipeOut({node:n,onEnd:_4.hitch(this,function(){_4.style(n,{"display":"none","height":"","width":""});})}).play();}}});_4.declare("dojox.widget.PortletDialogSettings",_6.widget.PortletSettings,{dimensions:null,constructor:function(_1d,_1e){this.dimensions=_1d.dimensions||[300,100];},toggle:function(){if(!this.dialog){_4["require"]("dijit.Dialog");this.dialog=new _5.Dialog({title:this.title});_4.body().appendChild(this.dialog.domNode);this.dialog.containerNode.appendChild(this.domNode);_4.style(this.dialog.domNode,{"width":this.dimensions[0]+"px","height":this.dimensions[1]+"px"});_4.style(this.domNode,"display","");}if(this.dialog.open){this.dialog.hide();}else{this.dialog.show(this.domNode);}}});}}};});