/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


realityBuilderDojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.widget.Rotator"],["require","dojo.parser"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.widget.Rotator"]){_4._hasResource["dojox.widget.Rotator"]=true;_4.provide("dojox.widget.Rotator");_4.require("dojo.parser");(function(d){var _7="dojox.widget.rotator.swap",_8=500,_9="display",_a="none",_b="zIndex";d.declare("dojox.widget.Rotator",null,{transition:_7,transitionParams:"duration:"+_8,panes:null,constructor:function(_c,_d){d.mixin(this,_c);var _e=this,t=_e.transition,tt=_e._transitions={},_f=_e._idMap={},tp=_e.transitionParams=eval("({ "+_e.transitionParams+" })"),_d=_e._domNode=_4.byId(_d),cb=_e._domNodeContentBox=d.contentBox(_d),p={left:0,top:0},_10=function(bt,dt){console.warn(_e.declaredClass," - Unable to find transition \"",bt,"\", defaulting to \"",dt,"\".");};_e.id=_d.id||(new Date()).getTime();if(d.style(_d,"position")=="static"){d.style(_d,"position","relative");}tt[t]=d.getObject(t);if(!tt[t]){_10(t,_7);tt[_e.transition=_7]=d.getObject(_7);}if(!tp.duration){tp.duration=_8;}d.forEach(_e.panes,function(p){d.create("div",p,_d);});var pp=_e.panes=[];d.query(">",_d).forEach(function(n,i){var q={node:n,idx:i,params:d.mixin({},tp,eval("({ "+(d.attr(n,"transitionParams")||"")+" })"))},r=q.trans=d.attr(n,"transition")||_e.transition;d.forEach(["id","title","duration","waitForEvent"],function(a){q[a]=d.attr(n,a);});if(q.id){_f[q.id]=i;}if(!tt[r]&&!(tt[r]=d.getObject(r))){_10(r,q.trans=_e.transition);}p.position="absolute";p.display=_a;if(_e.idx==null||d.attr(n,"selected")){if(_e.idx!=null){d.style(pp[_e.idx].node,_9,_a);}_e.idx=i;p.display="";}d.style(n,p);d.query("> script[type^='dojo/method']",n).orphan().forEach(function(s){var e=d.attr(s,"event");if(e){q[e]=d.parser._functionFromScript(s);}});pp.push(q);});_e._controlSub=d.subscribe(_e.id+"/rotator/control",_e,"control");},destroy:function(){d.forEach([this._controlSub,this.wfe],d.unsubscribe);d.destroy(this._domNode);},next:function(){return this.go(this.idx+1);},prev:function(){return this.go(this.idx-1);},go:function(p){var _11=this,i=_11.idx,pp=_11.panes,len=pp.length,idm=_11._idMap[p];_11._resetWaitForEvent();p=idm!=null?idm:(p||0);p=p<len?(p<0?len-1:p):0;if(p==i||_11.anim){return null;}var _12=pp[i],_13=pp[p];d.style(_12.node,_b,2);d.style(_13.node,_b,1);var _14={current:_12,next:_13,rotator:_11},_15=_11.anim=_11._transitions[_13.trans](d.mixin({rotatorBox:_11._domNodeContentBox},_14,_13.params));if(_15){var def=new d.Deferred(),ev=_13.waitForEvent,h=d.connect(_15,"onEnd",function(){d.style(_12.node,{display:_a,left:0,opacity:1,top:0,zIndex:0});d.disconnect(h);_11.anim=null;_11.idx=p;if(_12.onAfterOut){_12.onAfterOut(_14);}if(_13.onAfterIn){_13.onAfterIn(_14);}_11.onUpdate("onAfterTransition");if(!ev){_11._resetWaitForEvent();def.callback();}});_11.wfe=ev?d.subscribe(ev,function(){_11._resetWaitForEvent();def.callback(true);}):null;_11.onUpdate("onBeforeTransition");if(_12.onBeforeOut){_12.onBeforeOut(_14);}if(_13.onBeforeIn){_13.onBeforeIn(_14);}_15.play();return def;}},onUpdate:function(_16,_17){d.publish(this.id+"/rotator/update",[_16,this,_17||{}]);},_resetWaitForEvent:function(){if(this.wfe){d.unsubscribe(this.wfe);this.wfe=null;}},control:function(_18){var _19=d._toArray(arguments),_1a=this;_19.shift();_1a._resetWaitForEvent();if(_1a[_18]){var def=_1a[_18].apply(_1a,_19);if(def){def.addCallback(function(){_1a.onUpdate(_18);});}_1a.onManualChange(_18);}else{console.warn(_1a.declaredClass," - Unsupported action \"",_18,"\".");}},resize:function(_1b,_1c){var b=this._domNodeContentBox={w:_1b,h:_1c};d.contentBox(this._domNode,b);d.forEach(this.panes,function(p){d.contentBox(p.node,b);});},onManualChange:function(){}});d.setObject(_7,function(_1d){return new d._Animation({play:function(){d.style(_1d.current.node,_9,_a);d.style(_1d.next.node,_9,"");this._fire("onEnd");}});});})(_4);}}};});