/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


realityBuilderDojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.charting.axis2d.Default"],["require","dojox.charting.axis2d.Invisible"],["require","dojox.charting.scaler.linear"],["require","dojox.charting.axis2d.common"],["require","dojo.colors"],["require","dojo.string"],["require","dojox.gfx"],["require","dojox.lang.functional"],["require","dojox.lang.utils"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.charting.axis2d.Default"]){_4._hasResource["dojox.charting.axis2d.Default"]=true;_4.provide("dojox.charting.axis2d.Default");_4.require("dojox.charting.axis2d.Invisible");_4.require("dojox.charting.scaler.linear");_4.require("dojox.charting.axis2d.common");_4.require("dojo.colors");_4.require("dojo.string");_4.require("dojox.gfx");_4.require("dojox.lang.functional");_4.require("dojox.lang.utils");(function(){var dc=_6.charting,du=_6.lang.utils,g=_6.gfx,_7=dc.scaler.linear,_8=4,_9=45;_4.declare("dojox.charting.axis2d.Default",_6.charting.axis2d.Invisible,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0,htmlLabels:true},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(_a,_b){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_b);du.updateWithPattern(this.opt,_b,this.optionalParams);},getOffsets:function(){var s=this.scaler,_c={l:0,r:0,t:0,b:0};if(!s){return _c;}var o=this.opt,_d=0,a,b,c,d,gl=dc.scaler.common.getNumericLabel,_e=0,ma=s.major,mi=s.minor,ta=this.chart.theme.axis,_f=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_10=o.titleFont||(ta.tick&&ta.tick.titleFont),_11=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_12=this.chart.theme.getTick("major",o),_13=this.chart.theme.getTick("minor",o),_14=_f?g.normalizedLength(g.splitFontString(_f).size):0,_15=_10?g.normalizedLength(g.splitFontString(_10).size):0,_16=o.rotation%360,_17=o.leftBottom,_18=Math.abs(Math.cos(_16*Math.PI/180)),_19=Math.abs(Math.sin(_16*Math.PI/180));this.trailingSymbol=(o.trailingSymbol===undefined||o.trailingSymbol===null)?this.trailingSymbol:o.trailingSymbol;if(_16<0){_16+=360;}if(_14){if(this.labels){_d=this._groupLabelWidth(this.labels,_f,o.maxLabelCharCount);}else{_d=this._groupLabelWidth([gl(ma.start,ma.prec,o),gl(ma.start+ma.count*ma.tick,ma.prec,o),gl(mi.start,mi.prec,o),gl(mi.start+mi.count*mi.tick,mi.prec,o)],_f,o.maxLabelCharCount);}_d=o.maxLabelSize?Math.min(o.maxLabelSize,_d):_d;if(this.vertical){var _1a=_17?"l":"r";switch(_16){case 0:case 180:_c[_1a]=_d;_c.t=_c.b=_14/2;break;case 90:case 270:_c[_1a]=_14;_c.t=_c.b=_d/2;break;default:if(_16<=_9||(180<_16&&_16<=(180+_9))){_c[_1a]=_14*_19/2+_d*_18;_c[_17?"t":"b"]=_14*_18/2+_d*_19;_c[_17?"b":"t"]=_14*_18/2;}else{if(_16>(360-_9)||(180>_16&&_16>(180-_9))){_c[_1a]=_14*_19/2+_d*_18;_c[_17?"b":"t"]=_14*_18/2+_d*_19;_c[_17?"t":"b"]=_14*_18/2;}else{if(_16<90||(180<_16&&_16<270)){_c[_1a]=_14*_19+_d*_18;_c[_17?"t":"b"]=_14*_18+_d*_19;}else{_c[_1a]=_14*_19+_d*_18;_c[_17?"b":"t"]=_14*_18+_d*_19;}}}break;}_c[_1a]+=_8+Math.max(_12.length,_13.length)+(o.title?(_15+_11):0);}else{var _1a=_17?"b":"t";switch(_16){case 0:case 180:_c[_1a]=_14;_c.l=_c.r=_d/2;break;case 90:case 270:_c[_1a]=_d;_c.l=_c.r=_14/2;break;default:if((90-_9)<=_16&&_16<=90||(270-_9)<=_16&&_16<=270){_c[_1a]=_14*_19/2+_d*_18;_c[_17?"r":"l"]=_14*_18/2+_d*_19;_c[_17?"l":"r"]=_14*_18/2;}else{if(90<=_16&&_16<=(90+_9)||270<=_16&&_16<=(270+_9)){_c[_1a]=_14*_19/2+_d*_18;_c[_17?"l":"r"]=_14*_18/2+_d*_19;_c[_17?"r":"l"]=_14*_18/2;}else{if(_16<_9||(180<_16&&_16<(180-_9))){_c[_1a]=_14*_19+_d*_18;_c[_17?"r":"l"]=_14*_18+_d*_19;}else{_c[_1a]=_14*_19+_d*_18;_c[_17?"l":"r"]=_14*_18+_d*_19;}}}break;}_c[_1a]+=_8+Math.max(_12.length,_13.length)+(o.title?(_15+_11):0);}}if(_d){this._cachedLabelWidth=_d;}return _c;},render:function(dim,_1b){if(!this.dirty){return this;}var o=this.opt,ta=this.chart.theme.axis,_1c=o.leftBottom,_1d=o.rotation%360,_1e,_1f,_20,_21=0,_22,_23,_24,_25,_26,_27,_28=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_29=o.titleFont||(ta.tick&&ta.tick.titleFont),_2a=o.fontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"black",_2b=o.titleFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_2c=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_2d=o.titleOrientation||(ta.tick&&ta.tick.titleOrientation)||"axis",_2e=this.chart.theme.getTick("major",o),_2f=this.chart.theme.getTick("minor",o),_30=this.chart.theme.getTick("micro",o),_31=Math.max(_2e.length,_2f.length,_30.length),_32="stroke" in o?o.stroke:ta.stroke,_33=_28?g.normalizedLength(g.splitFontString(_28).size):0,_34=Math.abs(Math.cos(_1d*Math.PI/180)),_35=Math.abs(Math.sin(_1d*Math.PI/180)),_36=_29?g.normalizedLength(g.splitFontString(_29).size):0;if(_1d<0){_1d+=360;}if(this.vertical){_1e={y:dim.height-_1b.b};_1f={y:_1b.t};_20={y:(dim.height-_1b.b+_1b.t)/2};_22=_33*_35+(this._cachedLabelWidth||0)*_34+_8+Math.max(_2e.length,_2f.length)+_36+_2c;_23={x:0,y:-1};_26={x:0,y:0};_24={x:1,y:0};_25={x:_8,y:0};switch(_1d){case 0:_27="end";_26.y=_33*0.4;break;case 90:_27="middle";_26.x=-_33;break;case 180:_27="start";_26.y=-_33*0.4;break;case 270:_27="middle";break;default:if(_1d<_9){_27="end";_26.y=_33*0.4;}else{if(_1d<90){_27="end";_26.y=_33*0.4;}else{if(_1d<(180-_9)){_27="start";}else{if(_1d<(180+_9)){_27="start";_26.y=-_33*0.4;}else{if(_1d<270){_27="start";_26.x=_1c?0:_33*0.4;}else{if(_1d<(360-_9)){_27="end";_26.x=_1c?0:_33*0.4;}else{_27="end";_26.y=_33*0.4;}}}}}}}if(_1c){_1e.x=_1f.x=_1b.l;_21=(_2d&&_2d=="away")?90:270;_20.x=_1b.l-_22+(_21==270?_36:0);_24.x=-1;_25.x=-_25.x;}else{_1e.x=_1f.x=dim.width-_1b.r;_21=(_2d&&_2d=="axis")?90:270;_20.x=dim.width-_1b.r+_22-(_21==270?0:_36);switch(_27){case "start":_27="end";break;case "end":_27="start";break;case "middle":_26.x+=_33;break;}}}else{_1e={x:_1b.l};_1f={x:dim.width-_1b.r};_20={x:(dim.width-_1b.r+_1b.l)/2};_22=_33*_34+(this._cachedLabelWidth||0)*_35+_8+Math.max(_2e.length,_2f.length)+_36+_2c;_23={x:1,y:0};_26={x:0,y:0};_24={x:0,y:1};_25={x:0,y:_8};switch(_1d){case 0:_27="middle";_26.y=_33;break;case 90:_27="start";_26.x=-_33*0.4;break;case 180:_27="middle";break;case 270:_27="end";_26.x=_33*0.4;break;default:if(_1d<(90-_9)){_27="start";_26.y=_1c?_33:0;}else{if(_1d<(90+_9)){_27="start";_26.x=-_33*0.4;}else{if(_1d<180){_27="start";_26.y=_1c?0:-_33;}else{if(_1d<(270-_9)){_27="end";_26.y=_1c?0:-_33;}else{if(_1d<(270+_9)){_27="end";_26.y=_1c?_33*0.4:0;}else{_27="end";_26.y=_1c?_33:0;}}}}}}if(_1c){_1e.y=_1f.y=dim.height-_1b.b;_21=(_2d&&_2d=="axis")?180:0;_20.y=dim.height-_1b.b+_22-(_21?_36:0);}else{_1e.y=_1f.y=_1b.t;_21=(_2d&&_2d=="away")?180:0;_20.y=_1b.t-_22+(_21?0:_36);_24.y=-1;_25.y=-_25.y;switch(_27){case "start":_27="end";break;case "end":_27="start";break;case "middle":_26.y-=_33;break;}}}this.cleanGroup();try{var s=this.group,c=this.scaler,t=this.ticks,_37,f=_7.getTransformerFromModel(this.scaler),_38=!_21&&!_1d&&this.opt.htmlLabels&&!_4.isIE&&!_4.isOpera?"html":"gfx",dx=_24.x*_2e.length,dy=_24.y*_2e.length;s.createLine({x1:_1e.x,y1:_1e.y,x2:_1f.x,y2:_1f.y}).setStroke(_32);if(o.title){var _39=dc.axis2d.common.createText[_38](this.chart,s,_20.x,_20.y,"middle",o.title,_29,_2b);if(_38=="html"){this.htmlElements.push(_39);}else{_39.setTransform(g.matrix.rotategAt(_21,_20.x,_20.y));}}_4.forEach(t.major,function(_3a){var _3b=f(_3a.value),_3c,x=_1e.x+_23.x*_3b,y=_1e.y+_23.y*_3b;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_2e);if(_3a.label){var _3d=o.maxLabelCharCount?this.getTextWithLimitCharCount(_3a.label,_28,o.maxLabelCharCount):{text:_3a.label,truncated:false};_3d=o.maxLabelSize?this.getTextWithLimitLength(_3d.text,_28,o.maxLabelSize,_3d.truncated):_3d;_3c=dc.axis2d.common.createText[_38](this.chart,s,x+dx+_25.x+(_1d?0:_26.x),y+dy+_25.y+(_1d?0:_26.y),_27,_3d.text,_28,_2a);_3d.truncated&&this.labelTooltip(_3c,this.chart,_3a.label,_3d.text,_28,_38);if(_38=="html"){this.htmlElements.push(_3c);}else{if(_1d){_3c.setTransform([{dx:_26.x,dy:_26.y},g.matrix.rotategAt(_1d,x+dx+_25.x,y+dy+_25.y)]);}}}},this);dx=_24.x*_2f.length;dy=_24.y*_2f.length;_37=c.minMinorStep<=c.minor.tick*c.bounds.scale;_4.forEach(t.minor,function(_3e){var _3f=f(_3e.value),_40,x=_1e.x+_23.x*_3f,y=_1e.y+_23.y*_3f;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_2f);if(_37&&_3e.label){var _41=o.maxLabelCharCount?this.getTextWithLimitCharCount(_3e.label,_28,o.maxLabelCharCount):{text:_3e.label,truncated:false};_41=o.maxLabelSize?this.getTextWithLimitLength(_41.text,_28,o.maxLabelSize,_41.truncated):_41;_40=dc.axis2d.common.createText[_38](this.chart,s,x+dx+_25.x+(_1d?0:_26.x),y+dy+_25.y+(_1d?0:_26.y),_27,_41.text,_28,_2a);_41.truncated&&this.labelTooltip(_40,this.chart,_3e.label,_41.text,_28,_38);if(_38=="html"){this.htmlElements.push(_40);}else{if(_1d){_40.setTransform([{dx:_26.x,dy:_26.y},g.matrix.rotategAt(_1d,x+dx+_25.x,y+dy+_25.y)]);}}}},this);dx=_24.x*_30.length;dy=_24.y*_30.length;_4.forEach(t.micro,function(_42){var _43=f(_42.value),_44,x=_1e.x+_23.x*_43,y=_1e.y+_23.y*_43;s.createLine({x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_30);},this);}catch(e){}this.dirty=false;return this;},labelTooltip:function(_45,_46,_47,_48,_49,_4a){if(!_5||!_5.Tooltip){return;}var _4b={type:"rect"},_4c=["above","below"],_4d=_6.gfx._base._getTextBox(_48,{font:_49}).w||0;fontHeight=_49?g.normalizedLength(g.splitFontString(_49).size):0;if(_4a=="html"){_4.mixin(_4b,_4.coords(_45.firstChild,true));_4b.width=Math.ceil(_4d);_4b.height=Math.ceil(fontHeight);this._events.push({shape:_4,handle:_4.connect(_45.firstChild,"onmouseover",this,function(e){_5.showTooltip(_47,_4b,_4c);})});this._events.push({shape:_4,handle:_4.connect(_45.firstChild,"onmouseout",this,function(e){_5.hideTooltip(_4b);})});}else{var shp=_45.getShape(),lt=_4.coords(_46.node,true);_4b=_4.mixin(_4b,{x:shp.x-_4d/2,y:shp.y});_4b.x+=lt.x;_4b.y+=lt.y;_4b.x=Math.round(_4b.x);_4b.y=Math.round(_4b.y);_4b.width=Math.ceil(_4d);_4b.height=Math.ceil(fontHeight);this._events.push({shape:_45,handle:_45.connect("onmouseenter",this,function(e){_5.showTooltip(_47,_4b,_4c);})});this._events.push({shape:_45,handle:_45.connect("onmouseleave",this,function(e){_5.hideTooltip(_4b);})});}}});})();}}};});