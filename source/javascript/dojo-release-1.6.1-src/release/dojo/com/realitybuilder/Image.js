/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["com.realitybuilder.Image"]){dojo._hasResource["com.realitybuilder.Image"]=true;dojo.provide("com.realitybuilder.Image");dojo.declare("com.realitybuilder.Image",null,{_versionOnServer:"-1",_url:"",_updateIntervalClient:5,_updateIntervalServer:5,_node:null,_onloadHandle:null,_imageLoaded:false,constructor:function(_1){this._node=dojo.byId("live");this._node.style.width=_1.sensor().width()+"px";this._node.style.height=_1.sensor().height()+"px";this._onloadHandle=dojo.connect(this._node,"onload",this,this._onFirstImageLoad);this._refresh();},imageLoaded:function(){return this._imageLoaded;},versionOnServer:function(){return this._versionOnServer;},url:function(){return this._url;},updateIntervalServer:function(){return this._updateIntervalServer;},updateIntervalClient:function(){return this._updateIntervalClient;},updateWithServerData:function(_2){this._versionOnServer=_2.version;this._updateIntervalClient=_2.updateIntervalClient;this._updateIntervalServer=_2.updateIntervalServer;this._url=_2.url;this._backgroundImageInterval=_2.updateIntervalClient*1000;dojo.publish("com/realitybuilder/Image/changed");},_onFirstImageLoad:function(){this._imageLoaded=true;dojo.disconnect(this._onloadHandle);},_refresh:function(){this._node.src="/images/live.jpg?nocache="+Math.random().toString();setTimeout(dojo.hitch(this,this._refresh),this._updateIntervalClient*1000);this._refreshed=true;}});}