/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


realitybuilderDojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.grid.enhanced.plugins.Menu"],["require","dojox.grid.enhanced._Plugin"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.grid.enhanced.plugins.Menu"]){_4._hasResource["dojox.grid.enhanced.plugins.Menu"]=true;_4.provide("dojox.grid.enhanced.plugins.Menu");_4.require("dojox.grid.enhanced._Plugin");_4.declare("dojox.grid.enhanced.plugins.Menu",_6.grid.enhanced._Plugin,{name:"menus",types:["headerMenu","rowMenu","cellMenu","selectedRegionMenu"],constructor:function(){var g=this.grid;g.showMenu=_4.hitch(g,this.showMenu);g._setRowMenuAttr=_4.hitch(this,"_setRowMenuAttr");g._setCellMenuAttr=_4.hitch(this,"_setCellMenuAttr");g._setSelectedRegionMenuAttr=_4.hitch(this,"_setSelectedRegionMenuAttr");},onStartUp:function(){var _7,_8=this.option;for(_7 in _8){if(_4.indexOf(this.types,_7)>=0&&_8[_7]){this._initMenu(_7,_8[_7]);}}},_initMenu:function(_9,_a){var g=this.grid;if(!g[_9]){var m=this._getMenuWidget(_a);if(!m){return;}g.set(_9,m);if(_9!="headerMenu"){m._scheduleOpen=function(){return;};}}},_getMenuWidget:function(_b){return (_b instanceof _5.Menu)?_b:_5.byId(_b);},_setRowMenuAttr:function(_c){this._setMenuAttr(_c,"rowMenu");},_setCellMenuAttr:function(_d){this._setMenuAttr(_d,"cellMenu");},_setSelectedRegionMenuAttr:function(_e){this._setMenuAttr(_e,"selectedRegionMenu");},_setMenuAttr:function(_f,_10){var g=this.grid,n=g.domNode;if(!_f||!(_f instanceof _5.Menu)){console.warn(_10," of Grid ",g.id," is not existed!");return;}if(g[_10]){g[_10].unBindDomNode(n);}g[_10]=_f;g[_10].bindDomNode(n);},showMenu:function(e){var _11=(e.cellNode&&_4.hasClass(e.cellNode,"dojoxGridRowSelected")||e.rowNode&&(_4.hasClass(e.rowNode,"dojoxGridRowSelected")||_4.hasClass(e.rowNode,"dojoxGridRowbarSelected")));if(_11&&this.selectedRegionMenu){this.onSelectedRegionContextMenu(e);return;}var _12={target:e.target,coords:e.keyCode!==_4.keys.F10&&"pageX" in e?{x:e.pageX,y:e.pageY}:null};if(this.rowMenu&&(!this.cellMenu||this.selection.isSelected(e.rowIndex)||e.rowNode&&_4.hasClass(e.rowNode,"dojoxGridRowbar"))){this.rowMenu._openMyself(_12);_4.stopEvent(e);return;}if(this.cellMenu){this.cellMenu._openMyself(_12);}_4.stopEvent(e);},destroy:function(){var g=this.grid;if(g.headerMenu){g.headerMenu.unBindDomNode(g.viewsHeaderNode);}if(g.rowMenu){g.rowMenu.unBindDomNode(g.domNode);}if(g.cellMenu){g.cellMenu.unBindDomNode(g.domNode);}if(g.selectedRegionMenu){g.selectedRegionMenu.destroy();}this.inherited(arguments);}});_6.grid.EnhancedGrid.registerPlugin(_6.grid.enhanced.plugins.Menu);}}};});